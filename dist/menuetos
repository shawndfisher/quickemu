#!/usr/bin/env bash

INFO="MenuetOS|-|https://menuetos.net/|MenuetOS is an operating system in development for PC, written completely in 64bit assembly language."

GUEST="menuetos"

function dist_releases() {
    echo latest
}

function dist_image_get() {
    local FILEID="1bMdLL9PVcS_pw8xPf1CfexrTI04hGnZi"
    local URL="https://drive.usercontent.google.com/download?id=${FILEID}&confirm=xxx"
    local ISO="M64CD15060.zip"
    local HASH="3088df5f974220658ea77cab8a265a12cf976f6497c33648877f7f89827ff95a"
    echo "${URL}/${ISO} ${HASH}"
}

function dist_image_post_get() {
    if [[ ${ISO} = *".zip"* ]]; then
        unzip ${VM_PATH}/${ISO} -d ${VM_PATH}
        rm -f "${VM_PATH}/${ISO}"
        ISO="$(ls -1 "${VM_PATH}/"*.iso | cut -d'/' -f2)"
    fi
}

function dist_vm_option_tweak() {
    echo "boot=\"legacy\"" >> "${CONF_FILE}"
}

# vim:tabstop=4:shiftwidth=4:expandtab
