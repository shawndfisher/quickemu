#!/usr/bin/env bash

PRETTY_NAME="Icaros"
HOMEPAGE="https://vmwaros.blogspot.com/"
INFO="Icaros|Independent|-|https://vmwaros.blogspot.com/|Icaros Desktop is an Amiga-like operating system for the PC platform, with a full desktop environment, distributed on a bootable media."

GUEST="icaros"

function dist_releases() {
    echo 2.3.0 2.2.8 2.2.7 2.2.6 2.2.5
}

function dist_editions() {
    echo light live
}

function dist_image() {
    local HASH=""
    local URL="http://www.icarosdesktop.com/icarosfiles"
    local ISO="Icaros${EDITION^}_${RELEASE//./_}.zip"

    case ${EDITION} in
        Live|live)
            case ${RELEASE} in
                2.3.0)
                    HASH="f2e4fdbc71f48e35dccfe6c26ae07a8f" #
                    ;;
                2.2.8)
                    HASH="abb77ec6968f3a0823ba527bc0f73ce2"
                    ;;
                2.2.7)
                    HASH="d75c1fdc3a3ec6813c0ae768ea43eb47"
                    ;;
                2.2.6)
                    HASH="a518574abd6fcbb846f9fd6ae7fa36ec"
                    ;;
                2.2.5)
                    HASH="a89ec32c30a10bd4c551bee3b902740d"
                    ;;
            esac
            ;;
        Light|light)
            case ${RELEASE} in
                2.3.0)
                    HASH="a469a92982842303bbe904efe1d09ea6"
                    ;;
                2.2.8)
                    HASH="d8a626c732a6ab3be256ab0007d72b94"
                    ;;
                2.2.7)
                    HASH="50a2dc2c544b38c48e44f865c84d7824"
                    ;;
                2.2.6)
                    HASH="57366ac7a629f8dbe8da999f9b84eb91"
                    ;;
                2.2.5)
                    HASH="e4f5817ec32086b698948c6fc899aec3"
                    ;;
            esac
            ;;
    esac

    echo "${URL}"/"${ISO}" "${HASH}"
}

function dist_vm_option_tweak() {
    echo "boot=\"legacy\"" >> "${CONF_FILE}"
}

function dist_image_handle() {
    unzip -j ${VM_PATH}/${ISO} -d ${VM_PATH}
    ISO=$(ls ${VM_PATH} | grep -i '.iso' | grep -v '.zip')
}

# vim:tabstop=4:shiftwidth=4:expandtab
