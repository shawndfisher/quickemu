#!/usr/bin/env bash

PRETTY_NAME="Deepin"
HOMEPAGE="https://www.deepin.org"
INFO="Deepin|Debian|-|https://www.deepin.org/|Beautiful UI design, intimate human-computer interaction, and friendly community environment make you feel at home."

function dist_releases() {
    echo $(web_pipe "https://cdimage.deepin.com/releases/" | grep "href=" | cut -d'"' -f2 | grep -v "\.\." | grep -v nightly | grep -v preview | sed 's|/||g' | sort -r)
}

function dist_image() {
    local HASH=""
    local REV=${RELEASE}
    # deepin-desktop-community-20.3-amd64.iso
    local URL="https://cdimage.deepin.com/releases/"${RELEASE}
    # fix iso name
    if [[ "${RELEASE}" == *"20" ]] ; then
        REV="1003"
    elif [[ "${RELEASE}" == *"20.1" ]]; then
        REV="1010"
    fi
    local ISO="deepin-desktop-community-${REV}-amd64.iso"
    HASH=$(web_pipe "${URL}/SHA256SUMS" | grep "${ISO}" | cut -d' ' -f1)
    echo "${URL}/${ISO} ${HASH}"
}

function dist_vm_option_tweak() {
    echo "disk_size=\"64G\"" >> "${CONF_FILE}"
    echo "ram=\"4G\"" >> "${CONF_FILE}"
}

# vim:tabstop=4:shiftwidth=4:expandtab
