#!/usr/bin/env bash

PRETTY_NAME="openSUSE"
HOMEPAGE="https://www.opensuse.org/"
INFO="openSUSE|Independent|-|https://www.opensuse.org/|The makers choice for sysadmins, developers and desktop users."

function dist_releases() {
    echo $(web_pipe "https://download.opensuse.org/distribution/leap/" | grep 'class="name"' | cut -d '/' -f2 | grep -v 42 | sort -r) microos tumbleweed
}

function dist_image() {
    local HASH=""
    local ISO=""
    local URL=""
    case ${RELEASE} in
        tumbleweed)
            ISO="openSUSE-${RELEASE^}-DVD-x86_64-Current.iso"
            URL="https://download.opensuse.org/${RELEASE}/iso"
            ;;
        microos)
            ISO="openSUSE-MicroOS-DVD-x86_64-Current.iso"
            URL="https://download.opensuse.org/${RELEASE}/iso"
            ;;
        15.0|15.1|15.2)
            ISO="openSUSE-Leap-${RELEASE}-DVD-x86_64.iso"
            URL="https://download.opensuse.org/distribution/leap/${RELEASE}/iso"
            ;;
        15.3)
            ISO="openSUSE-Leap-${RELEASE}-3-DVD-x86_64-Build38.1-Media.iso"
            URL="https://download.opensuse.org/distribution/leap/${RELEASE}/iso"
            ;;
        *)
            ISO="openSUSE-Leap-${RELEASE}-DVD-x86_64-Current.iso"
            URL="https://download.opensuse.org/distribution/leap/${RELEASE}/iso"
    esac
    HASH="$(web_pipe "${URL}/${ISO}.sha256" | grep iso | cut -d' ' -f1)"
    echo "${URL}/${ISO} ${HASH}"
}

# vim:tabstop=4:shiftwidth=4:expandtab
