#!/usr/bin/env bash

INFO="CachyOS|-|https://cachyos.org/|Designed to deliver lightning-fast speeds and stability, ensuring a smooth and enjoyable computing experience every time you use it."

function dist_releases() {
    echo latest
}

function dist_editions() {
    #shellcheck disable=SC2046,SC2005
    echo $(web_pipe "https://mirror.cachyos.org/ISO/" | grep "title=" | grep -v testing | grep -v cli | cut -d'"' -f4 | cut -d '/' -f1 | sort)
}

function dist_image_get() {
    local HASH=""
    local REL=""
    local URL="https://mirror.cachyos.org/ISO/${EDITION}/"
    REL=$(web_pipe "${URL}" | grep -o '>[0-9]*/</a>' | grep -o '[0-9]*' | sort -ru | tail -n 1)
    local ISO="cachyos-${EDITION}-linux-${REL}.iso"
    HASH=$(web_pipe "${URL}/${REL}/${ISO}.sha256" | cut -d' ' -f1)
    echo "${URL}/${REL}/${ISO} ${HASH}"
}

# vim:tabstop=4:shiftwidth=4:expandtab
